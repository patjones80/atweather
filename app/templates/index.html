<!DOCTYPE html>

<html>

<!-- <script>

	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-57389593-1', 'auto');
	ga('send', 'pageview');

</script> -->

<head>
	<meta name = "description" content = "Location-specific weather forecasts for all 285 shelters and camp sites along the Appalachian Trail." />
	<meta name = "robots" content = "index,follow" />
	<meta name = "googlebot" content = "index,follow" />

	<title>Appalachian Trail Weather</title>
	<link rel = "stylesheet" type = "text/css" href = "/static/style.css"/>

	<link rel = "shortcut icon" href = "/static/favicon.ico" type = "image/x-icon">
	<link rel = "icon" href = "/static/favicon.ico" type = "image/x-icon">

	<script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

	<script>
	
		$(document).ready(function()
			{ 
				
				var allStatesGlobal = $('#myStateHidden option');
				var allLocationsGlobal = $('#myShelterHidden option');
				
				$(myTrail).change(function()
				{
					<!-- a selection was made from the trail list -->
					
					var currTrail = document.getElementById("myTrail").value;

					if (currTrail == 'AT') {
						<!-- define the state list for the AT -->
						var currTrailStates = allStatesGlobal.filter('.labelText,.GA,.NC,.TN,.VA,.MD,.PA,.NJ,.NY,.CT,.MA,.VT,.NH,.ME');
						var currStateLocations = allLocationsGlobal.filter('.labelText,.GA,.NC,.TN,.VA,.MD,.PA,.NJ,.NY,.CT,.MA,.VT,.NH,.ME');
					}	
					else {
						<!-- define the state list for the PCT -->
						var currTrailStates = allStatesGlobal.filter('.labelText,.CA,.OR,.WA');
						var currStateLocations = allLocationsGlobal.filter('.labelText,.CA,.OR,.WA');						
					};						

					<!-- remove everything from the state list and repopulate only with the filtered list -->
					$('#myState option').remove();
					
					$.each(currTrailStates, function (i, j) 
					{
						$(j).appendTo('#myState');
					});

					document.getElementById('myState').selectedIndex = "0";
					
					<!-- remove everything from the shelter list and repopulate only with the filtered list -->
					$('#myShelter option').remove();

					$.each(currStateLocations, function (i, j) 
					{
						$(j).appendTo('#myShelter');
					});

					document.getElementById('myShelter').selectedIndex = "0";
					
				});

				$(myState).change(function() 
				{ 
				
					<!-- a selection was made from the state list -->
					
					var currState = document.getElementById("myState").value;										
					var currStateLocations = allLocationsGlobal.filter('.labelText,.' + currState);

					<!-- remove everything from the shelter list and repopulate only with the filtered list -->
					$('#myShelter option').remove();

					$.each(currStateLocations, function (i, j) 
					{
						$(j).appendTo('#myShelter');
					});
				
				}); 
				
			});
			
	</script>

</head>

<body>

<div id = body_div>

	<div id = "header">
		<h1>Appalachian Trail Weather</h1>

		<a href = "https://www.appalachiantrail.org"><img src = "/static/at_logo_1.jpg" alt = "AT Logo" style = "width:60px;height:60px;"></a>
		<a href = "https://www.lnt.org"><img src = "/static/lnt_logo.jpg" alt = "Leave No Trace Logo" style = "width:120px;height:60px;"></a>

		<br>
		<br>
		<br>

	    <h3>Location-specific forecasts from the National Weather Service (NOAA)</h3>

		<p>The purpose of this website is simple: to provide AT and PCT hikers with a reliable and easy way to obtain weather for their location. Simply pick your state and shelter location from the lists below and the National Weather Service forecast for that location will appear.</p>

		<p>Please see <a href = "http://127.0.0.1:5000/precip_discussion">this discussion</a> relating to how forecasts should be interpreted.</p>

		<p><span style = "color:red; font-weight:bold">New!</span> AT Weather welcomes the Pacific Crest Trail! Use the new drop down box below to filter for the PCT. Many thanks to PCT hiker, volunteer and map-maker "<a href = "https://www.pctmap.net/">Halfmile</a>" for providing a comprehensive GPS file of the PCT, necessary in making this enhancement a reality.</p>

	</div>

    <div id = "formControls">

	    <form action = "/forecast" method = "GET">

			<div id = "trailList">
			
				<select id = "myTrail" name = "myTrail">
				
					<option selected = "selected" value = "">Select trail...</option>
					
						{% for o in trail_list %}
							<option value = "{{ o[0] }}" {{ o[2] }}>{{ o[1] }}</option>
						{% endfor %}
						
				</select>
			</div>
			
			<br>
			
			<div id = "stateList">

				<select id = "myState" name = "myState">

					<option selected = "selected" value = "" class = "labelText">Select state...</option>

					{% for o in state_list %}
						<option value = "{{ o[0] }}" class = "{{ o[0] }}" {{ o[2] }}>{{ o[1] }}</option>
					{% endfor %}
					
				</select>

			</div>
			
			<br>
			
			<div id = "shelterList">

				<select id = "myShelter" name = "myShelter" onchange = "this.form.submit()">

					<option selected = "selected" value = "" class = "labelText">Select location...</option>

					{% for o in shelter_list %}
						<option value = "{{ o[0] }}" class = "{{ o[3] }}" {{ o[4] }}>{{ o[1] }}</option>
					{% endfor %}

				</select>
				
			</div>

	    </form>

		<select hidden id = "myStateHidden" name = "myStateHidden">

			<option selected = "selected" value = "" class = "labelText">Select state...</option>

			{% for o in state_list_full %}
				<option value = "{{ o[0] }}" class = "{{ o[0] }}" {{ o[2] }}>{{ o[1] }}</option>
			{% endfor %}
					
		</select>
		
		<select hidden id = "myShelterHidden" name = "myShelterHidden">

			<option selected = "selected" value = "" class = "labelText">Select location...</option>

			{% for o in shelter_list_full %}
				<option value = "{{ o[0] }}" class = "{{ o[3] }}" {{ o[4] }}>{{ o[1] }}</option>
			{% endfor %}

		</select>
		
    </div>	
 
	{% block discuss_pops %}{% endblock %}
	{% block handle_error %}{% endblock %}
	
	<div id = "forecast">
		{{ forecast_text }}
	</div>
	
    <br>
    <br>
    <br>
    <br>

    <div id = "footerContainer">

	    <div id = "footer">
		    <footer>Powered by Python 3.4 and Flask 0.10.1. Questions? Comments? <a href = "mailto:patjones80@gmail.com">patjones80@gmail.com</a> ("Zen" 2015)</footer>
	    </div> 	

    </div>

</div>

</body>

</html>


